<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Browse Vehicles - Client | MVRMS</title>
    <link rel="stylesheet" href="/MVRMS/client/css/client.css">
    <link rel="icon" type="image/png" href="/MVRMS/client/images/logo.png">
</head>
<body>
<div class="dashboard-layout">
    <aside class="sidebar">
        <div class="sidebar-header">
            <img src="/MVRMS/client/images/logo.png" class="sidebar-logo">
            <h2>MVRMS</h2>
        </div>
        <nav class="sidebar-nav">
            <a href="/MVRMS/client/pages/client/dashboard.html" class="nav-item">Dashboard</a>
            <a href="/MVRMS/client/pages/client/browse-vehicles.html" class="nav-item active">Browse Vehicles</a>
            <a href="/MVRMS/client/pages/client/make-reservation.html" class="nav-item">Make Reservation</a>
            <a href="/MVRMS/client/pages/client/my-bookings.html" class="nav-item">My Bookings</a>
            <a href="/MVRMS/client/pages/client/rental-history.html" class="nav-item">Rental History</a>
            <a href="/MVRMS/client/pages/client/handle-payment.html" class="nav-item">Payments</a>
            <a href="/MVRMS/client/pages/client/profile.html" class="nav-item">Profile</a>
            <a href="/MVRMS/client/pages/login.html" class="nav-item logout">Logout</a>
        </nav>
    </aside>

    <main class="main-content">
        <header class="top-bar">
            <div class="search-bar">
                <input type="text" placeholder="Search vehicles...">
            </div>
        </header>

        <div class="page-content">
            <h1>Browse Vehicles</h1>

            <!-- FILTERS -->
            <div class="filter-section">
                <div class="filter-group">
                    <label>Type</label>
                    <select>
                        <option>All</option>
                        <option>Motor</option>
                        <option>Car</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label>Max Price</label>
                    <select>
                        <option>All</option>
                        <option>₱1000</option>
                        <option>₱2000</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label>Availability</label>
                    <select>
                        <option>All</option>
                        <option>Available</option>
                        <option>Rented</option>
                    </select>
                </div>
            </div>

            <!-- ✅ CONTAINER NA GINAGAMIT NG JS -->
            <div id="vehiclesGrid"></div>

        </div>
    </main>
</div>

<script>
/* ================= LOAD & RENDER VEHICLES ================= */
function renderVehicles(vehicles) {
    const grid = document.getElementById("vehiclesGrid");
    grid.innerHTML = "";

    vehicles.forEach(v => {
        const imgSrc = v.image
            ? `/MVRMS/client/images/vehicles/${v.image}`
            : `/MVRMS/client/images/vehicles/default.jpg`;

        const isAvailable = v.availability === "Available";

        grid.innerHTML += `
            <div class="vehicle-card">
                <img src="${imgSrc}" alt="${v.vehicle_name}" class="vehicle-img">

                <h3>${v.vehicle_name}</h3>
                <p>₱${v.daily_rate} / day</p>
                <p>Status: <strong>${v.availability}</strong></p>

                <button 
                    ${!isAvailable ? "disabled" : ""}
                    onclick="reserveVehicle(${v.vehicle_id})">
                    ${isAvailable ? "Reserve" : "Rented"}
                </button>
            </div>
        `;
    });
}

/* ================= FETCH VEHICLES ================= */
fetch("/MVRMS/api/get-available-vehicles.php")
    .then(res => res.json())
    .then(data => {
        renderVehicles(data);
    })
    .catch(err => {
        console.error("Vehicle load error:", err);
    });

/* ================= RESERVE ================= */
function reserveVehicle(vehicleId) {
    window.location.href =
        `/MVRMS/client/pages/client/make-reservation.html?vehicle_id=${vehicleId}`;
}
</script>

</body>
</html>
